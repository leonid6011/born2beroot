Посчитать хеш-сумму: 
	certUtil -hashfile b2br_vm.vdi sha1


/////////////////////////////////////////////////////////////////////////////////////
.....................................................................................
apt-get APT (Advanced Package Tool) - инструмент командной строки для взаимодействия 
с упаковочной системой пакетов dpkg. Система пакетов - способ предоставления программ
и приложений для установки. Таким образом, не придется собирать программу из исходного
кода. Есть и команды dpkg, но apt является более удобным способом работы с пакетами.

У APT есть два основных инструмента apt-get и apt-cache.
apt-get - преднозначен для установки, обновления и отчиски пакетов и тд.
apt-cache - используется для поиска новых пакетов.

sudo apt-get update - обновление базы данных пакетов.

три типа строк:
hit - нет никаких изменений 
ign - пакет игнорируется
get - доступна новая версия

sudo apt-get upgrade - обновление установленных пакетов

чтобы обновить только определенную программу:
sudo apt-get upgrade <package_name>

опция -y - отвечает всегда "да"

apt-cache search <search term> - команда для поиска пакетов (не требует судо)

sudo apt-get install  <package_name> - установка определенного пакета

sudo apt-get remove <package_name> - удаляет двоичные файлы пакета

sudo apt-get purge <package_name> - удаляет все что связано с пакетом,
включая конфигурационные файлы

отчиска системы с помощью apt-get 

sudo apt-get clean - отчистка кеша apt

sudo apt-get autoclean - автоотчистка, удаляет только те файлы пакета,
которые имею более новую версию, и поэтому больше не будут использоваться.

sudo apt-get autoremove - автоудаление, можно удалить библиотеки и пакеты, которые
были установленны автоматическидля удовлетворения зависимостей другого
установленного пакета. Если этот пакет удален, то эти автоматически установленные
пакеты бесполезны в системе. Эта команда удаляет эти пакеты.
.................................................................................
aptitude - это высокоуровневый пакетный менеджер, а apt - низкоуровневый который
могут использовать другие менеджеры пакетов более высокого уровня.
aptitude является более функциональным чем apt-get, объединяет функциональные возможности 
apt-get и её других вариантов включая apt-mark и apt-cache.
..........................................................................................
..........................................................................................
КОМАНДЫ:
вывод данных о системе
	uname -a 

посмотреть структуру дисков
	lsblk 

LVM расшифровывается как Logical Volume Management. Это система управления логическими
 томами или файловыми системами, которая является гораздо более продвинутой и гибкой,
 чем традиционный метод разделения диска на один или несколько сегментов и форматирования
 этого раздела с файловой системой.

Проверить наименование хоста
	hostnamectl 
Установить новое имя хоста
	hostnamectl set-hostname "новое имя хоста" 
файл с названием компьютера
	sudo vim /etc/hostname 
	или
	vim /etc/hosts
перезагрузка компьютера
	sudo reboot 

залогинится на мой сервер:
	ssh -p <port> <user>@<hostname>

установить sudo	
	apt install sudo 
установить VIM
	apt-get install vim 
установка UFW
	apt-get install ufw
установить SSH сервер
	sudo apt install openssh-server ssh

удаление пакета/программы
	sudo apt-get remove "name" 
удаление пакета/программы полностью
	sudo apt-get —purge remove evolution 

ищем файлы по имени
	find / -name "name" 
смотрим имя пакета, которому принадлежит файл
	sudo dpkg -S /usr/bin/evolution 

активные программы
	systemctl status 
..........................................................................................
--------------------------------USERS AND GROUPS------------------------------------------
..........................................................................................
чтобы узнать в каких группах пользователь
	groups
	or
	groups <user_name>
	id -nG "username"

есть ли данный пользователь в системе
	getent passwd | grep "username" 

добавить юзера
	adduser "имя юзера"

какими привилегиями обладает конкретный пользователь
	sudo -lU "username" 

чтобы перечислить все учетные записи
	getent passwd
	or
	cat /etc/passwd

создание группы:
	groupadd <groupname>

удалить группу
	sudo groupdel "groupname"

показать группы
	getent group
	or
	cat /etc/group вместе с системными

добавить юзера в группу
	usermod -aG <groupname> <username>
	adduser "username" "groupname"

-aG - это опция, которая указывает команде добавить пользователя в определенную группу.
Опция -a добавляет пользователя в группу, не удаляя его из текущих групп. 
Опция -G указывает группу, в которую нужно добавить пользователя. В этом случае
эти два варианта всегда идут рука об руку.

удалить пользьвателя из группы
	sudo deluser "username" "groupname"
удалить пользователя из (перечисление) групп
	sudo usermod -G group1,group2 "username" 
удалить пользователя из всех групп
	sudo usermod -G "username" 

проверить наличие пользователя в группе
	getent group "groupname"

проверить был ли добавлен пользователь в группу судо
	getent group sudo

войти на сервер по ssh 
	ssh -p <port> <user_name>@<hostname>

удаление юзера
	userdel <user_name>
	or
	userdel -r <user_name> с домашней и почтовой папкой

если есть ошибка что пользователь используется каким либо процеcсом
	pkill -9 <pid>
где pid - process id
..........................................................................................
_______________________________ПОЛИТИКА ПАРОЛЕЙ___________________________________________
..........................................................................................

Экспирация паролей:

vim /etc/login.defs файл конфигурации данный по паролям

PASS_MAX_DAYS 30 Срок действия пароля
PASS_MIN_DAYS 2 Минимальное количество дней между сменами пароля
PASS_WARN_AGE 7 Количество дней предупреждения до истечения срока действия пароля


Требования к паролю:

vim /etc/pam.d/common-password открываем файл настройки паролей

password requisite pam_cracklib.so с флагами

minlen=10 Минимальная длина пароля
ucredit=-1 минимум одна буква в верхнем регистре
lcredit=-1 минимум одна буква в нижнем регистре
dcredit=-1 минимум одна цифра
maxrepeat=3 пароль не должен содержать более 3-х идущих подряд одинаковых символов
reject_username пароль не должен включать имя пользователя
difok=7 Количество символов в вашем новом пароле, которые НЕ должны присутствовать в вашем старом пароле

КОМАНДЫ:
MAX (30 days) срок действия пароля
	chage -M <days> <user_name>
MIN (2 days) - минимальное кол-во дней между сменами пароля
	chage -m <days> <user_name>
Warning (7 days) кол-во дней предупреждения до истечения срока действия пароля
	chage -W <days> <user_name>

Изменить пароль активного юзера
	passwd
Изменить пароль выбранного юзера
	passwd <user_name>
Показать пароль юзера
	chage -l <user_name>
Посмотреть все пароли пользователей
	passwd -aS | grep P 
.........................................................................................................
_____________________________________SUDO________________________________________________________________
.........................................................................................................
Команда sudo позволяет пользователям без полномочий root запускать команды, которые обычно требуют
привилегий суперпользователя, в то время как файл sudoers указывает системе, как обрабатывать
команду sudo.

установка sudo
	apt install sudo

проверка установки
	dpkg -s "имя пакета" 
проверка установки судо
	dpkg -l | grep sudo

добавить юзера в группу sudo 
	sudo adduser <username> sudo

редактирование файла sudo (путь /etc/sudoers)
	sudo visudo

по соображениям безопасности пути,
которые может использовать sudo, должны быть ограничены => добавляем
":/snap/bin"

разрешить вызов sudo с реального терминала, но не с помощью
таких методов, как скрипты
	Defaults requiretty
(In computing, tty is a command in Unix and Unix-like operating systems to print 
the file name of the terminal connected to standard input. tty stands for
TeleTYpewriter. To enable sudo to be invoked from a real tty but not through 
methods such as cron or cgi-bin scripts)

записывать в лог все попытки подключения к sudo (создать саму папку и файл) 
	Defaults logfile="/var/log/sudo/sudo.log" 

позволяют sudo запускать команду в pseudo-tty и регистрировать все вводимые
пользователем и все выходные данные, отправленные на экран
	Defaults log_input,log_output

сообщение при ошибочном вводе пароля судо:
	Defaults badpass_message="Password is wrong, please try again!"

количество попыток ввода пароля перед тем, как sudo прекратит работу
	Defaults passwd_tries=3 
.................................................................................................
___________________________________________UFW___________________________________________________
.................................................................................................

UFW (Uncomplicated Firewall) - является самым простым и довольно популярным в инструментарием
командной строки для настройки и управления брандмауэром в дистрибутивах Ubuntu и Debian.
Правильно функционирующий брандмауэр является наиболее важной частью полной безопасности
системы Linux. UFW позволяет сделать базовые настройки, для более сложных настроек используйте iptables.

установка ufw
	sudo apt install ufw
статус ufw
	sudo ufw status verbose 
включить брандмауэр UFW
	sudo ufw enable
отключить брандмауэр UFW
	sudo ufw disable

Настройка:

запрещает все входящие подключения
	sudo ufw default deny incoming 
разрешает исходящие
	sudo ufw default allow outgoing
открыть порт 4242 для входящих подключений
	sudo ufw allow 4242
закрыть порт 8080
	sudo ufw deny 8080
выведете нумерованный список текущих правил
	sudo ufw status numbered
удалить правило
	sudo ufw delete "номер_правила" 

sudo ufw app info 'Apache' дополнительная информацию о конкретном профиле и
определенных правилах

sudo ufw allow from 203.0.113.4 различные варианты команд
sudo ufw allow from 203.0.113.4 to any port 22
sudo ufw allow from 203.0.113.0/24
sudo ufw allow from 203.0.113.0/24 to any port 22
sudo ufw allow in on eth0 to any port 80

Enable SSH connections
To enable SSH connections on your host, run the following command:
	sudo ufw allow ssh
And to see the existing rules:
	sudo ufw status
......................................................................................
_______________________________________SSH____________________________________________
......................................................................................
SSH (от англ. “Secure Shell”) — это протокол удаленного администрирования,
 разработанный для осуществления удаленного управления операционными системами
 и туннелирования TCP-соединения. Использование этого протокола допускает
 использование разных алгоритмов шифрования, что позволяет безопасно работать
 практически в любой незащищенной среде: работать с ПК через командную оболочку,
 передавать по шифрованному каналу любой тип данных (например, видео- и аудиофайлы).

Всегда проверить на обновления:
	sudo apt-get update
Установка:
	sudo apt-get install openssh-server
Запуск SSH сервера:
	sudo systemctl start sshd
Статус SSH сервера:
	sudo systemctl status sshd
перезапуск SSH сервера
	sudo systemctl restart sshd 
	или
	sudo service ssh restart

Настройка файла конфига:

открыть файл конфига
	sudo nano /etc/ssh/sshd_config

#Port 22 меняем значение на Port 4242
#PermitRootLogin… на PermitRootLogin no выставляем значение "no" и пишем без #
(Делаем невозможно подключение с использованием SSH как root)

чтобы изменения вступили в силу делаем рестарт:
	sudo systemctl restart sshd
и проверяем статус
	sudo systemctl status sshd
подключится:
	ssh -p 4242 echrysta@echrysta42
	ssh "user"@localhost -p 4242
отключится:
	exit

отключение ssh сервера:
	sudo systemctl stop sshd
	
	sudo systemctl status sshd
.......................................................................................
--------------------------------------SCRIPT-------------------------------------------
.......................................................................................

Если в двух словах, то Cron – это планировщик задач. Если подробнее, то это утилита,
позволяющая выполнять скрипты на сервере в назначенное время с заранее определенной
периодичностью.

узнаем где лежит интерпретатор
	whereis bash 

	/bin/bash

	sudo vim /usr/local/bin/monitoring.sh

Сделайте скрипт исполняемым:
	sudo chmod ugo+x /usr/local/bin/monitoring.sh

В vim monitoring.sh добавляем:

#Architecture: $(uname -a) - печать РАСШИРЕННОЙ системной информации
#CPU physical: $(nproc —all) - печать доступных ядер (--all распечатать кол-во установленных процессоров )
#vCPU: $(cat /proc/cpuinfo | grep processor | wc -l)

(Команда free предоставляет информацию об общем объеме физической
и подкачки памяти, а также о свободной и используемой памяти
и пространстве подкачки в системе.

Команда awk - один из самых мощных инструментов для обработки и фильтрации текста
df -h файлы системв мб

NR - Это общее количество обработанных записей.
head -1 пропуск

who - b (--boot) — показывает время загрузки операционной системы.
grep -c считаем )

........................................................................................
редактирования или создания файла расписания для текущего пользователя
	crontab -e 
	*/10 * * * * ./monitoring.sh
Вывод существующих задач в расписании пользователя
	crontab -l 
Удаление файла расписания текущего пользователя
	crontab -r 
Работа с расписаниями указанных пользователей. Выполняется только от пользователя root
	crontab -u username 

